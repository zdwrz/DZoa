package com.dz.oa.controller;import com.dz.oa.service.ProjectService;import com.dz.oa.service.TimesheetService;import com.dz.oa.utility.Constants;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.format.annotation.DateTimeFormat;import org.springframework.stereotype.Controller;import org.springframework.ui.ModelMap;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpSession;import java.util.Date;import java.util.Map;@Controller@RequestMapping({"/timesheet"})public class TimesheetController {	@Autowired	ProjectService projectService;	@Autowired	TimesheetService timesheetService;	@RequestMapping(value = "/ts/{weekId}",method = RequestMethod.GET)	public String newTimesheet(ModelMap model, @PathVariable Integer weekId, HttpSession session) {		model.addAttribute("projList", projectService.getProjListForMap());		model.addAttribute("dateList",timesheetService.getCurrentTimesheetDate(weekId));		model.addAttribute("projTsList", timesheetService.getProjTimesheetData(weekId,(int)session.getAttribute(Constants.USER_ID)));		model.addAttribute(weekId);		return "timesheet/timesheet";	}	/**	 * allInputs format:	 * key : ${projTs.project.id}_${billCodeTs.billCode.id}_monday	 * value : # of hours	 * @param model	 * @param dateOfMonday	 * @param allInputs	 * @return	 */	@RequestMapping(value = "/save/{weekId}", method = RequestMethod.POST)	public String saveimesheet(ModelMap model,  @PathVariable Integer weekId, @DateTimeFormat(pattern="MM/dd/yyyy") Date dateOfMonday, @RequestParam Map<String,String> allInputs) {		return "redirect:/timesheet/ts/" + weekId;	}	@RequestMapping("/manage")	public String manageTimeSheet(ModelMap model) {		model.addAttribute("projList", projectService.getProjListForMap());		return "/timesheet/manage_time_sheet";	}}